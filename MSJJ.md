## 行情

L1：最新价，买一卖一，成交量，成交额
L2：逐笔成交（每一笔成交的明细），多档盘口（订单簿不同价位的单量）
K 线：按时间聚合

## 交易机制

T+0/T+1
集合竞价/连续竞价
撮合优先级：价格优先+时间优先

## 订单簿

买（greater）/卖（less）
数组 + 单向链表（适合价格范围有限的股票市场）
红黑树 + 双向链表（价格跨度大的市场）
跳表 + 单向链表（高频撮合）

## 高频优化技巧

内存预分配：预先创建好一堆对象
缓存友好布局：结构体中高频访问的字段放一起，在结构体前面，一起加载进缓存（一行 64B）；数组遍历比链表快
批量处理订单
硬件加速

## 时序行情数据用什么结构？

1. 两级 map，一层 key 是合约 id， 二层 key 是时间戳，和行情结构体
2. map+固定数组
3. 环形缓冲区，预分配循环队列，按时间顺序覆盖旧数据
4. 时序 db，时间戳索引，支持时间范围查询

## 为什么量化

金融行业，重技术，遇到挑战  
金融行业强监管，互联网野蛮生长  
美资外企，数据，大公司是螺丝钉，努力为公司，规模

## 优点/缺点

提问，站在用户角度
顽固
